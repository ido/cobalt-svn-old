--RESERVATION TABLES

SET CURRENT SCHEMA COBALT_LOG_DB

CREATE TABLE RESERVATION_DATA ( \
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 10 ORDER) NOT NULL PRIMARY KEY, \
    NAME VARCHAR(128) NOT NULL, \
    CYCLE INTEGER, \
    CYCLEID INTEGER, \
    RESID INTEGER NOT NULL, \
    START TIMESTAMP NOT NULL, \
    DURATION INTEGER NOT NULL, \
    QUEUE VARCHAR(128) NOT NULL \
)

CREATE TABLE RESERVATION_PARTS ( \
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 10 ORDER) NOT NULL PRIMARY KEY, \
   RES_DATA_ID INTEGER NOT NULL REFERENCES RESERVATION_DATA("ID"), \
   NAME VARCHAR(128) NOT NULL \
)

CREATE TABLE RESERVATION_USERS ( \
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 10 ORDER) NOT NULL PRIMARY KEY, \
   RES_DATA_ID INTEGER NOT NULL REFERENCES RESERVATION_DATA("ID"), \
   NAME VARCHAR(16) NOT NULL \
)

CREATE TABLE RESERVATION_STATES ( \
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 10 ORDER) NOT NULL PRIMARY KEY, \
   NAME VARCHAR(8) NOT NULL \
)

CREATE TABLE RESERVATION_PROG ( \
   ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 10 ORDER) NOT NULL PRIMARY KEY, \
   RES_DATA_ID INTEGER NOT NULL REFERENCES RESERVATION_DATA("ID"), \
   STATE INTEGER NOT NULL REFERENCES RESERVATION_STATES("ID"), \
   ENTRY_TIME TIMESTAMP NOT NULL, \
   EXEC_USER VARCHAR(16) \
)
